JAVAPROJECT = ../../../../JavaProject
CLASS_PATH = $(JAVAPROJECT)/bin
SRC = $(JAVAPROJECT)/src

AST = $(SRC)/gal/ast
UTIL = $(SRC)/gal/util

AST_FILES := $(wildcard $(AST)/*.java $(AST)/export/*.java)
UTIL_FILES := $(wildcard $(UTIL)/*.java) 

PARSER = Parser
JAVACC_FILES = \
	ParseException.java SimpleCharStream.java Token.java TokenMgrError.java \
	$(PARSER).java $(PARSER)Constants.java $(PARSER)TokenManager.java

parser: parser.java $(CLASS_PATH)/
	@echo $(AST) $(UTIL)
	@javac -cp $(CLASS_PATH)/ -d $(CLASS_PATH)/ $(UTIL_FILES) $(AST_FILES) $(JAVACC_FILES) 

%.java: %.jj
	@echo "CREATING .java files from .jj files"
	@javacc $<

help:
	@echo "1. INSTALL JavaCC with command: apt get install javacc"
	@echo "2. RUN     JavaCC with command: make"

$(CLASS_PATH)/ :
	mkdir $(CLASS_PATH)/

clean: 
	@echo "REMOVING files generated by JavaCC" 
	rm -f $(JAVACC_FILES)
